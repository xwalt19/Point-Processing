import numpy as np
import matplotlib.pyplot as plt
from google.colab import files
from io import BytesIO
from PIL import Image

print("Silakan unggah gambar untuk efek Darken...")
uploaded = files.upload()

if len(uploaded.keys()) > 0:
    file_name = list(uploaded.keys())[0]
    image_data = uploaded[file_name]
    
    image_pil = Image.open(BytesIO(image_data))
    original_image = np.array(image_pil)
    if original_image.shape[2] == 4:
        original_image = original_image[:, :, :3]
        
    # --- Proses Darken ---
    img_float = original_image.astype(np.float32)
    darkened_image = np.clip(img_float - 128, 0, 255).astype(np.uint8)
    
    # --- Tampilkan Hasil Darken Saja---
    plt.figure(figsize=(8, 8))
    plt.imshow(darkened_image)
    plt.title('Hasil: Darken')
    plt.axis('off')
    plt.show()
